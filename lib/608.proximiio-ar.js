var ProximiioAR;self.Module={onRuntimeInitialized:function(){icvGetInteger=Module.cwrap("icvGetInteger","number",["string"]),icvSetInteger=Module.cwrap("icvSetInteger","number",["string","number"]),icvLoadMap=Module.cwrap("icvLoadMap","number",["number"]),icvFreeMap=Module.cwrap("icvFreeMap","number",["number"]),icvLocalize=Module.cwrap("wasmLocalize","number",["number","number","number","number","number","number","number","number","number"]),postMessage({type:"Init",data:0})}},onmessage=function(e){const{type:t,data:o}=e.data;if("LoadMap"==t){const e=o,t=Module._malloc(e.length*e.BYTES_PER_ELEMENT);Module.HEAPU8.set(e,t);let a=icvLoadMap(t);Module._free(t),postMessage({type:"LoadMap",data:a})}else if("FreeMap"==t){let e=icvFreeMap(o);postMessage({type:"FreeMap",data:e})}else if("Localize"==t){const e=o[0],t=o[1],a=o[2],l=o[3],r=o[4],n=o[5],s=o[6],u=o[7],M=new Float32Array([u.x,u.y,u.z,u.w]);let c=new Float32Array(3),i=new Float32Array(4),d=new Float32Array([a.fx,a.fy,a.ox,a.oy]);const E=Module._malloc(l.length*l.BYTES_PER_ELEMENT);Module.HEAPU8.set(l,E);const g=Module._malloc(c.length*c.BYTES_PER_ELEMENT);Module.HEAPF32.set(c,g>>2);const p=Module._malloc(i.length*i.BYTES_PER_ELEMENT);Module.HEAPF32.set(i,p>>2);const m=Module._malloc(d.length*d.BYTES_PER_ELEMENT);Module.HEAPF32.set(d,m>>2);const _=Module._malloc(M.length*M.BYTES_PER_ELEMENT);Module.HEAPF32.set(M,_>>2);let b=icvLocalize(g,p,e,t,m,E,4,s,_);b>=0&&(c=Module.HEAPF32.subarray(g>>2,(g>>2)+c.length),i=Module.HEAPF32.subarray(p>>2,(p>>2)+i.length),d=Module.HEAPF32.subarray(m>>2,(m>>2)+d.length));const y=[c[0],c[1],c[2]],P=[i[0],i[1],i[2],i[3]],f=d[0],L=[n.x,n.y,n.z,n.w];Module._free(E),Module._free(g),Module._free(p),Module._free(m),Module._free(_),postMessage({type:"Localize",data:{r:b,pos:y,rot:P,time:r,gyro:L,focalLength:f}})}else if("GetInteger"==t){let e=icvGetInteger(o);postMessage({type:"GetInteger",data:e})}else if("SetInteger"==t){let e=icvSetInteger(o[0],o[1]);postMessage({type:"SetInteger",data:e})}},self.importScripts("PosePlugin.js"),ProximiioAR={};